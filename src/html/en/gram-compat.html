<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head><script src="//archive.org/includes/analytics.js?v=cf34f82" type="text/javascript"></script>
<script type="text/javascript">window.addEventListener('DOMContentLoaded',function(){var v=archive_analytics.values;v.service='wb';v.server_name='wwwb-app223.us.archive.org';v.server_ms=653;archive_analytics.send_pageview({});});</script>
<script type="text/javascript" src="/_static/js/bundle-playback.js?v=KTqwAcYd" charset="utf-8"></script>
<script type="text/javascript" src="/_static/js/wombat.js?v=UHAOicsW" charset="utf-8"></script>
<script type="text/javascript">
  __wm.init("https://web.archive.org/web");
  __wm.wombat("http://pascal.tsu.ru:80/en/xkb/gram-compat.html","20190723235757","https://web.archive.org/","web","/_static/",
	      "1563926277");
</script>
<link rel="stylesheet" type="text/css" href="/_static/css/banner-styles.css?v=fantwOh2" />
<link rel="stylesheet" type="text/css" href="/_static/css/iconochive.css?v=qtvMKcIJ" />
<!-- End Wayback Rewrite JS Include -->

<meta http-equiv="Content-Type" content="text/html; charset=windows-1251"/>
<title>Ivan Pascal (Homepage)</title>
<style type="text/css" media="all">@import url(/web/20190723235757cs_/http://pascal.tsu.ru/css/style.css);</style>
</head>
<body><!-- BEGIN WAYBACK TOOLBAR INSERT -->
<style type="text/css">
body {
  margin-top:0 !important;
  padding-top:0 !important;
  /*min-width:800px !important;*/
}
</style>
<script>__wm.rw(0);</script>
<div id="wm-ipp-base" lang="en" style="display:none;direction:ltr;">
<div id="wm-ipp" style="position:fixed;left:0;top:0;right:0;">
<div id="donato" style="position:relative;width:100%;">
  <div id="donato-base">
    <iframe id="donato-if" src="https://archive.org/includes/donate.php?as_page=1&amp;platform=wb&amp;referer=https%3A//web.archive.org/web/20190723235757/http%3A//pascal.tsu.ru/en/xkb/gram-compat.html"
	    scrolling="no" frameborder="0" style="width:100%; height:100%">
    </iframe>
  </div>
</div><div id="wm-ipp-inside">
  <div id="wm-toolbar" style="position:relative;display:flex;flex-flow:row nowrap;justify-content:space-between;">
    <div id="wm-logo" style="/*width:110px;*/padding-top:12px;">
      <a href="/web/" title="Wayback Machine home page"><img src="/_static/images/toolbar/wayback-toolbar-logo-200.png" srcset="/_static/images/toolbar/wayback-toolbar-logo-100.png, /_static/images/toolbar/wayback-toolbar-logo-150.png 1.5x, /_static/images/toolbar/wayback-toolbar-logo-200.png 2x" alt="Wayback Machine" style="width:100px" border="0" /></a>
    </div>
    <div class="c" style="display:flex;flex-flow:column nowrap;justify-content:space-between;flex:1;">
      <form class="u" style="display:flex;flex-direction:row;flex-wrap:nowrap;" target="_top" method="get" action="/web/submit" name="wmtb" id="wmtb"><input type="text" name="url" id="wmtbURL" value="http://pascal.tsu.ru/en/xkb/gram-compat.html" onfocus="this.focus();this.select();" style="flex:1;"/><input type="hidden" name="type" value="replay" /><input type="hidden" name="date" value="20190723235757" /><input type="submit" value="Go" />
      </form>
      <div style="display:flex;flex-flow:row nowrap;align-items:flex-end;">
		<div class="s" id="wm-nav-captures" style="flex:1;">
	  	  <a class="t" href="/web/20190723235757*/http://pascal.tsu.ru/en/xkb/gram-compat.html" title="See a list of every capture for this URL">37 captures</a>
	  <div class="r" title="Timespan for captures of this URL">16 Aug 2004 - 23 Jul 2019</div>
	  </div>
	<div class="k">
	  <a href="" id="wm-graph-anchor">
	    <div id="wm-ipp-sparkline" title="Explore captures for this URL" style="position: relative">
	      <canvas id="wm-sparkline-canvas" width="675" height="27" border="0"></canvas>
	    </div>
	  </a>
	</div>
      </div>
    </div>
    <div class="n">
      <table>
	<tbody>
	  <!-- NEXT/PREV MONTH NAV AND MONTH INDICATOR -->
	  <tr class="m">
	    <td class="b" nowrap="nowrap"><a href="https://web.archive.org/web/20190522035546/http://pascal.tsu.ru:80/en/xkb/gram-compat.html" title="22 May 2019"><strong>May</strong></a></td>
	    <td class="c" id="displayMonthEl" title="You are here: 23:57:57 Jul 23, 2019">JUL</td>
	    <td class="f" nowrap="nowrap">Aug</td>
	  </tr>
	  <!-- NEXT/PREV CAPTURE NAV AND DAY OF MONTH INDICATOR -->
	  <tr class="d">
	    <td class="b" nowrap="nowrap"><a href="https://web.archive.org/web/20190722195747/http://pascal.tsu.ru:80/en/xkb/gram-compat.html" title="19:57:47 Jul 22, 2019"><img src="/_static/images/toolbar/wm_tb_prv_on.png" alt="Previous capture" width="14" height="16" border="0" /></a></td>
	    <td class="c" id="displayDayEl" style="width:34px;font-size:22px;white-space:nowrap;" title="You are here: 23:57:57 Jul 23, 2019">23</td>
	    <td class="f" nowrap="nowrap"><img src="/_static/images/toolbar/wm_tb_nxt_off.png" alt="Next capture" width="14" height="16" border="0" /></td>
	  </tr>
	  <!-- NEXT/PREV YEAR NAV AND YEAR INDICATOR -->
	  <tr class="y">
	    <td class="b" nowrap="nowrap"><a href="https://web.archive.org/web/20180106105657/http://pascal.tsu.ru:80/en/xkb/gram-compat.html" title="06 Jan 2018"><strong>2018</strong></a></td>
	    <td class="c" id="displayYearEl" title="You are here: 23:57:57 Jul 23, 2019">2019</td>
	    <td class="f" nowrap="nowrap">2020</td>
	  </tr>
	</tbody>
      </table>
    </div>
    <div class="r" style="display:flex;flex-flow:column nowrap;align-items:flex-end;justify-content:space-between;">
      <div id="wm-btns" style="text-align:right;height:23px;">
        	<span class="xxs">
          <div id="wm-save-snapshot-success">success</div>
          <div id="wm-save-snapshot-fail">fail</div>
          <a id="wm-save-snapshot-open" href="#"
	     title="Share via My Web Archive" >
            <span class="iconochive-web"></span>
          </a>
          <a href="https://archive.org/account/login.php" title="Sign In" id="wm-sign-in">
            <span class="iconochive-person"></span>
          </a>
          <span id="wm-save-snapshot-in-progress" class="iconochive-web"></span>
	</span>
        	<a class="xxs" href="http://faq.web.archive.org/" title="Get some help using the Wayback Machine" style="top:-6px;"><span class="iconochive-question" style="color:rgb(87,186,244);font-size:160%;"></span></a>
	<a id="wm-tb-close" href="#close" style="top:-2px;" title="Close the toolbar"><span class="iconochive-remove-circle" style="color:#888888;font-size:240%;"></span></a>
      </div>
      <div id="wm-share" class="xxs">
        <a href="/web/20190723235757/http://web.archive.org/screenshot/http://pascal.tsu.ru/en/xkb/gram-compat.html"
           id="wm-screenshot"
           title="screenshot">
          <span class="wm-icon-screen-shot"></span>
        </a>
        <a href="#" id="wm-video" title="video">
          <span class="iconochive-movies"></span>
        </a>
	<a id="wm-share-facebook" href="#" data-url="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru:80/en/xkb/gram-compat.html" title="Share on Facebook" style="margin-right:5px;" target="_blank"><span class="iconochive-facebook" style="color:#3b5998;font-size:160%;"></span></a>
	<a id="wm-share-twitter" href="#" data-url="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru:80/en/xkb/gram-compat.html" title="Share on Twitter" style="margin-right:5px;" target="_blank"><span class="iconochive-twitter" style="color:#1dcaff;font-size:160%;"></span></a>
      </div>
      <div style="padding-right:2px;text-align:right;white-space:nowrap;">
	<a id="wm-expand" class="wm-btn wm-closed" href="#expand" onclick="__wm.ex(event);return false;"><span id="wm-expand-icon" class="iconochive-down-solid"></span> <span class="xxs" style="font-size:80%;">About this capture</span></a>
      </div>
    </div>
  </div>
    <div id="wm-capinfo" style="border-top:1px solid #777;display:none; overflow: hidden">
                    <div id="wm-capinfo-collected-by">
    <div style="background-color:#666;color:#fff;font-weight:bold;text-align:center">COLLECTED BY</div>
    <div style="padding:3px;position:relative" id="wm-collected-by-content">
            <div style="display:inline-block;vertical-align:top;width:50%;">
			<span class="c-logo" style="background-image:url(https://archive.org/services/img/alexacrawls);"></span>
		Organization: <a style="color:#33f;" href="https://archive.org/details/alexacrawls" target="_new"><span class="wm-title">Alexa Crawls</span></a>
		<div style="max-height:75px;overflow:hidden;position:relative;">
	  <div style="position:absolute;top:0;left:0;width:100%;height:75px;background:linear-gradient(to bottom,rgba(255,255,255,0) 0%,rgba(255,255,255,0) 90%,rgba(255,255,255,255) 100%);"></div>
	  Starting in 1996, <a href="http://www.alexa.com/">Alexa Internet</a> has been donating their crawl data to the Internet Archive.  Flowing in every day, these data are added to the <a href="http://web.archive.org/">Wayback Machine</a> after an embargo period.
	</div>
	      </div>
      <div style="display:inline-block;vertical-align:top;width:49%;">
			<span class="c-logo" style="background-image:url(https://archive.org/services/img/alexacrawls)"></span>
		<div>Collection: <a style="color:#33f;" href="https://archive.org/details/alexacrawls" target="_new"><span class="wm-title">Alexa Crawls</span></a></div>
		<div style="max-height:75px;overflow:hidden;position:relative;">
	  <div style="position:absolute;top:0;left:0;width:100%;height:75px;background:linear-gradient(to bottom,rgba(255,255,255,0) 0%,rgba(255,255,255,0) 90%,rgba(255,255,255,255) 100%);"></div>
	  Starting in 1996, <a href="http://www.alexa.com/">Alexa Internet</a> has been donating their crawl data to the Internet Archive.  Flowing in every day, these data are added to the <a href="http://web.archive.org/">Wayback Machine</a> after an embargo period.
	</div>
	      </div>
    </div>
    </div>
    <div id="wm-capinfo-timestamps">
    <div style="background-color:#666;color:#fff;font-weight:bold;text-align:center" title="Timestamps for the elements of this page">TIMESTAMPS</div>
    <div>
      <div id="wm-capresources" style="margin:0 5px 5px 5px;max-height:250px;overflow-y:scroll !important"></div>
      <div id="wm-capresources-loading" style="text-align:left;margin:0 20px 5px 5px;display:none"><img src="/_static/images/loading.gif" alt="loading" /></div>
    </div>
    </div>
  </div></div></div></div><div id="wm-ipp-print">The Wayback Machine - https://web.archive.org/web/20190723235757/http://pascal.tsu.ru:80/en/xkb/gram-compat.html</div>
<script type="text/javascript">//<![CDATA[
__wm.bt(675,27,25,2,"web","http://pascal.tsu.ru/en/xkb/gram-compat.html","20190723235757",1996,"/_static/",["/_static/css/banner-styles.css?v=fantwOh2","/_static/css/iconochive.css?v=qtvMKcIJ"], false);
  __wm.rw(1);
//]]></script>
<!-- END WAYBACK TOOLBAR INSERT -->

<div style="position:absolute; top:10; right:0; z-index:3"><img src="/web/20190723235757im_/http://pascal.tsu.ru/img/logo.jpg"/>
<div style=" font-size:11px;">
<a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/en/">ENGLISH</a> | 
<a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/">KOI</a> | 
<a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/win/">WIN</a> | 
<a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/alt/">ALT</a> | 
<a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/iso/">ISO</a></div>
</div>

<div id="head"><h2>Иван Паскаль</h2>
<div class="anotation">
Этот сайт посвящен описанию Операционной Системы
<noindex><a href="https://web.archive.org/web/20190723235757/http://www.freebsd.org/">FreeBSD</a></noindex> (одна из разновидностей Unix). 
<br/>
Я его сделал для того, чтобы хоть немного восполнить недостаток
документации, особенно на русском языке.<a href="unix"> Полная "Table of Contents"</a>
</p>
</div>
</div>


<table width="100%">
<tr>
<td width="300" valign="top">

<div id="block">
<div class="title"><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/unix/add/adding.html">Добавление компонент из дистрибутива</a></div>
	<ul>
		<li><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/unix/add/packages.html">Установка "пакетов" (packages)</a></li>
		<li><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/unix/add/ports.html">Установка "портов" (ports)</a></li>
		<li><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/unix/add/sysinst.html">С помощью программы sysinstall</a></li>
		<li><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/unix/add/manualy.html">Установка "вручную"</a></li>
	</ul>
</div>
<div id="block">
<div class="title"><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/unix/users/users0.html">Работа администратора с user account</a></div>
<ul>
  <li> <a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/unix/users/users1.html">Что такое &quot;учетная карточка&quot;?</a> </li>
  <li> <a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/unix/users/users2.html">Что  хранится в учетной карточке?</a> </li>
  <li> <a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/unix/users/users3.html">Для чего используется учетная карточка?</a> </li>
  <li> <a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/unix/users/users4.html">Где хранятся учетные карточки?</a> </li>
  <li> <a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/unix/users/users5.html">Добавление пользователя</a></li>
  <li> <a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/unix/users/users6.html">Редактирование данных учетной карточки?</a> </li>
  <li> <a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/unix/users/users7.html">Удаление пользователя</a></li>
  <li> <a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/unix/users/users8.html">Права пользователя на учетную карточку</a></li>
  <li> <a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/unix/users/users9.html">Временная блокировка пользователя</a></li>
  <li> <a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/unix/users/users10.html">Что еще почитать?</a> </li>
</ul>
</div>
<div id="block">
<div class="title"><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/unix/users/groups.html">Группы (пользователей)</a></div>
<ul>
  <li> <a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/unix/users/groups1.html">Что такое группа?</a> </li>
  <li> <a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/unix/users/groups2.html">Где хранится информация о группах?</a> </li>
  <li> <a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/unix/users/groups3.html">Колличество групп, юзеров в группе, групп у юзера</a></li>
  <li> <a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/unix/users/groups4.html">Как создать или удалить группу?</a> </li>
  <li> <a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/unix/users/groups5.html">Редактирование принадлежности юзера к группе</a> </li>
</ul>
</div>
<div id="block">
<div class="title"><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/unix/files/files1.html">Права доступа к файлам</a></div>
<ul>
	<li><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/unix/files/files2.html">Какие атрибуты файла определяют &quot;право доступа&quot;.</a></li>
	<li><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/unix/files/files3.html">Основные биты доступа (чтение/запись/выполнение)</a> </li>
	<li><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/unix/files/files4.html">Дополнительные биты доступа</a> </li>
	<li><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/unix/files/files5.html">&quot;Странные&quot; сочетания битов доступа.</a> </li>
	<li><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/unix/files/files6.html">Флаги.</a> </li>
	<li><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/unix/files/files7.html">С какими правами файл &quot;рождается&quot;</a> </li>
	<li><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/unix/files/files7a.html">Права после копирования или перемещения</a></li>
	<li><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/unix/files/files8.html">Как поменять права </a></li>
	<li><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/unix/files/files9.html">Что делать если этого не хватает?</a> </li>
</ul>
</div>
<div id="block">
<div class="title"><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/unix/syscons/syscons.html">Драйвер "системной консоли" - syscons</a></div>
<ul>
  <li><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/unix/syscons/main.html">Основные возможности syscons</a> </li>
  <li><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/unix/syscons/screen.html">Дисплей</a> </li>
  <li><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/unix/syscons/keyboard.html">Клавиатура</a> </li>
  <li><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/unix/syscons/kbd-examples.html">Примеры изменения назначения клавиш.</a> </li>
  <li><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/unix/syscons/vidcontrol.html">Программа vidcontrol</a> </li>
  <li><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/unix/syscons/kbdcontrol.html">Программа kbdcontrol</a> </li>
  <li><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/unix/syscons/russian.html">Русификация syscons</a> </li>
  <li><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/unix/syscons/termcap.html">&quot;Взаимопонимание&quot; программ с терминалом </a></li>
  <li><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/unix/syscons/XWin.html"> Какое отношение это имеет к X-Window?</a> </li>
  <li><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/unix/syscons/ansi.html">Команды (esc-последовательности) syscons</a> </li>
  <li><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/unix/syscons/app2.html">Управляющие (&quot;контроловые&quot;) символы</a> </li>
  <li><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/unix/syscons/app3.html">&quot;Функциональные&quot; клавиши</a> </li>
  <li><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/unix/syscons/app4.html">Несколько мелких полезных программок.</a> </li>
</ul>
</div>
<div id="block">
<div class="title">Разное</div>
<ul>
	<li><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/unix/lint/rebuild.html">Перегенерация ядра системы (kernel)</a></li>
	<li><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/other/frames.html">Фреймы Ethernet.</a></li>
	<li><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/other/xkb/">XKB - "клавиатурный модуль" X-Window.</a></li>
</ul>
</div>
<div id="block">
<div class="title">Мои программы</div>
<ul>
	<li><a href="other/xxkb/">Xxkb</a> (для модуля XKB)</li>
	<li><a href="other/xxkb/README">README</a> и <a href="other/xxkb/CHANGES">CHANGES</a>.</li>
</ul>
</div>
</td>

<td class="content" valign="top" align="left"><h2>The xkb_compat type files.</h2>
  <p> This file contents describes modifier keys behavior. Or in the other words  how keyboard state changes when you press such keys. </p>
  <p> I should remind that the XKB module has internal tables named <strong>Xkb Compability Map</strong>. This data consists of two parts: </p>
  <ul>
    <li> table of <strong>interpretation</strong>; </li>
    <li> four single variables that defines <strong>real</strong> modifiers that will  indicate current group number for 'old' application (that doesn't know about  &quot;current group&quot; field in key event). </li>
  </ul>
  <p> An application can request X-server to change symbol to keycode  binding. If the symbol is ordinar &quot;printable&quot; symbol there is no problem.  But if it is &quot;control&quot; symbol that imply change of modifier, group number  or XKB internal state the XKB module has to bind an &quot;action&quot; to corresponded  place in keycode bound table. But &quot;old standard&quot; request has no information  about &quot;action&quot; so XKB has to decide what action must be bound using own data. <br/>
    And the <strong>Xkb Compability Map</strong> is used for this problem solution. </p>
  <p> The xkb_compat type files can contain records: </p>
  <ul>
    <li><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/en/xkb/gram-compat.html#vmodDec">Virtual modifier declarstion.</a> </li>
    <li><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/en/xkb/gram-compat.html#interpret">Interpretation desctription.</a> </li>
    <li><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/en/xkb/gram-compat.html#group">Group number to modifier mapping.</a> </li>
    <li><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/en/xkb/gram-compat.html#indicator">Indicator behavior description.</a> </li>
    <li><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/en/xkb/gram-compat.html#defaults">Defaults declaration.</a> </li>
  </ul>
  <h3><a name="vmodDec" id="vmodDec">Virtual modifier declaration.</a></h3>
  <p> As in <strong>xkb_types</strong> type files a virtual modifiers that  can be used in followed inctructions must be declared here.  A real modifiers that can be used doesn't need to be declared becouse  they have standard names. But the virtual modifiers can have any names  therefore parser program need to know these names before all other instruction  will be parsed. </p>
  <p> Virtual modifier declaration looks like: </p>
  <p>'virtual_modifiers' modifiers list ';'  </p>
For example:
<p>virtual_modifiers NumLock, AltGr ;  </p>
<h3><a name="interpret" id="interpret">Interpretation description.</a></h3>
<p> Each <strong>interpretation</strong> defines relation between some control <strong>symbol</strong> code and an <strong>action</strong> that the XKB has to perform  at key pressing. </p>
<p> Internal structure that describes interpretation consists of fields </p>
<ul>
  <li> symbol code </li>
  <li> key <strong>action</strong> </li>
  <li> real modifiers set </li>
  <li> modifiers &quot;match condition&quot; </li>
  <li> <strong>autorepeat</strong> and <strong>lock</strong> flags </li>
  <li> virtual modifier for key </li>
</ul>
<p> Of course, not all fields need to be filled. </p>
<p> The main fields are &quot;symbol code&quot; that defines symbol to which action  has to be bound and &quot;action&quot; field that describes this action itself. </p>
<p> Also interpretation can contain filled &quot;real modifiers&quot; and &quot;match condition&quot;  fields. </p>
<p> What these two fields are used for? <br/>
  Remind that to each <strong>keycode</strong> a real modifier can be bound.  Searching appropriate place for <strong>action</strong> bunding the XKB can use  not only control symbol code but these real modifiers placement too. </p>
<p> If these two fields isn't specified the XKB places <strong>action</strong> to the same key (to the same cell) where control symbol will be placed to. </p>
<p> But if these fields aren't empty the XKB before <strong>action</strong> placing  compares modifier bound to <strong>keycode</strong> with &quot;real modifiers set&quot;  specified in <strong>interpretation</strong>. The &quot;match condition&quot; defines how modifiers  has to be compared (details see below). <br/>
  Only if compare result is successful the <strong>action</strong> will be bound  to keycode. </p>
<p> By the way, if these two fields are specified the <strong>interpretation</strong> can have not &quot;symbol code&quot;. It means that the XKB can find place for <strong>action</strong> using compare result only.    For example, <strong>interpretation</strong> can mean - &quot;place the <strong>action</strong> to  keycode that has <strong>Lock</strong> modifier bound independently on what symbol  is bound to that keycode&quot;. </p>
<p> So.. The &quot;real modifiers&quot; field is one or more modifiers. <br/>
  And &quot;match condition&quot; is one of conditions: </p>
<ul>
  <li> <strong>AnyOfOrNone</strong> - actually means that the real modifiers field doesn't  make sense; this condition means that the keycode can have any of modifiers  specified in the <strong>interpretation</strong> or none of them so it always is true. </li>
  <li> <strong>NoneOf</strong> - keycode must have no one of specified modifiers. </li>
  <li> <strong>AnyOf</strong> - keycode must have at least one of specified modifiers. </li>
  <li> <strong>AllOf</strong> - keycode must have all specified modifiers. </li>
  <li> <strong>Exactly</strong> - similar to previous one; keycode must have all specified  modifiers but must have no one of other modifiers. </li>
</ul>
Also there is another one confition that can be used together with  any of above conditions:
<ul>
  <li> <strong>LevelOneOnly</strong> - this condition is true if symbol has to be placed  in first level of first group of keycode symbols table. Usualy this condition  is used if <strong>interpretation</strong> has to change keycode flags or virtual  modifiers. </li>
</ul>
<p> Of course, by default the &quot;real modifiers&quot; field is empty and &quot;match  condition&quot; is <strong>AnyOfOrNone</strong>. </p>
<p> The fields &quot;flags&quot; and &quot;virtual modifier&quot; also can be moved into keycode  description. Since such fields are common for whole keycode description  (not for particular symbol cell) the <strong>interpretation</strong> that binds  these fields to keycode usualy contain <strong>LevelOneOnly</strong> condition. </p>
<p> Flags will be added to &quot;key behavior&quot; and &quot;virtual modifier&quot; will be placed  to &quot;firtual modifiers&quot; field of keycode description (each keycode has these  fields). </p>
<p> By default &quot;virtual modifier&quot; field is empty and &quot;flags&quot; field contains  &quot;autorepeat&quot; flag.      Thus, the <strong>interpretation</strong> whole description looks like: </p>
<p>'interpret' symbol '{' description '};'  </p>
or
<p>'interpret' symbol '+' modifier '{' description '};'  </p>
or
<p>'interpret' symbol '+' condition '(' modifiers ') {' description '};'  </p>
For example:
<p>interpret  Num_Lock {...};  interpret  ISO_Level2 + Shift {...};  interpret  ISO_Lock + AnyOf(Lock+shift) {...};  </p>
<ul>
  <li> If in heading only symbol code is specified it means that  the match condition is <strong>AnyOfOrNone</strong> and real modifier field is empty. </li>
  <li> If one has specified symbol code and modifier name (but no conditions)  it means that condition is <strong>Exactly</strong>. </li>
  <li> If condition is specified the string inside parenthesis is list  of modifiers or special word <strong>all</strong>. You guess that the last one  means &quot;all modifiers&quot;. </li>
  <li> Also instead of condition and modifiers list you can use word <strong>Any</strong>.  It means the same as <strong>AnyOf(all)</strong>. </li>
  <li> And as I already said, if interpretation has modifiers list and  condition the symbol code can be absent. In this case the symbol name in heading  must be replaced with word <strong>Any</strong>. <br/>
    For example:
    <p>interpret Any + Any {...};  </p>
    means that this <strong>interpretation</strong> has to be applied to each keycode  that have any real modifier. </li>
</ul>
<p> Instructions inside interpretation description looks like assignment  instruction: </p>
<ul>
  <li><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/en/xkb/gram-compat.html#usemodmap">useModMapMods = ...; or useModMap = ...;</a> </li>
  <li><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/en/xkb/gram-compat.html#repeat">repeat = ...;</a> </li>
  <li><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/en/xkb/gram-compat.html#repeat">locking = ...;</a> </li>
  <li><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/en/xkb/gram-compat.html#vmod">virtualModifier = ...; or virtualMod = ...;</a> </li>
  <li><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/en/xkb/gram-compat.html#action">action = ...;</a> </li>
</ul>
<h4><a name="usemodmap" id="usemodmap">useModMapMods</a></h4>
<p> Is used for specifying <strong>LevelOneOnly</strong> condition.  If a word in right side is &quot;<strong>level1</strong>&quot; or &quot;<strong>levelone</strong>&quot; the condition  has to be checked. But words &quot;<strong>anylevel</strong>&quot; or &quot;<strong>any</strong>&quot; means that  the condition has to be ignored. By the way, by default this condition  has to be ignored, so lines like </p>
<p>useModMapMods = anylevel;  </p>
doesn't make sense.
<h4><a name="repeat" id="repeat">repeat and locking</a></h4>
<p> These instruction are used for specifying &quot;autorepeat&quot; and &quot;locking&quot; flags.  The word in right side must be name of logical value - <strong>True</strong> or <strong>False</strong>. <br/>
  For example: </p>
<p>repeat = True;  locking = False;  </p>
<h4><a name="vmod" id="vmod">virtualModifier</a></h4>
<p> This instruction defines a virtual modifier for keycode. Since such  modifier is attribute of keycode (not of particular symbol),  the interpretation with <strong>virtualModifier</strong> usualy uses <strong>LevelOneOnly</strong> condition. </p>
<p> A word in right side is name of any virtual modifier. <br/>
  For example: </p>
<p>virtualModifier = AltGr;  </p>
<h4><a name="action" id="action">action</a></h4>
<p> This instruction describes an <strong>action</strong>. More details about format  of action description you can read in <a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/en/xkb/gram-action.html">Actions description</a>. <br/>
  Here I only note that the <strong>action</strong> field can be empty.  If <strong>interpretation</strong> is needed for binding flags or virtual modifiers only  its description can looks like: </p>
<p>interpret ... {    repeat = False;    locking = True;    action = NoAction();  };  </p>
<h3><a name="group" id="group">Group number to modifier mapping.</a></h3>
<p> I should remind that group number occupates two bit field in XKB internal  state and in key event meassage. But old application know nothing about  XKB groups and this two bit field in event. Such application decides that  group (remind that old keyboard module has two &quot;group&quot; too) is changed  using one of modifier. </p>
<p> Therefore for such application the XKB needs to map group number value  to some modifier state. </p>
<p> For each value (from one to four) separate mpodifier can be used.  (But usualy for all groups except first one modifier is used.) </p>
<p> This declaration looks simply: </p>
<p>'group' group number '=' modifier ';'  </p>
For example:
<p>group 2 = AltGr;  </p>
<h3><a name="indicator" id="indicator">Indicator behavior description.</a></h3>
<p> Although indicators behavior has no relation to <strong>compability map</strong>,  they also are described in <strong>xkb_compat</strong> type files. </p>
<p> I should remind that the XKB can manage up to 32 indicators.  The first 3-4 ones (in dependence on hardware type) match to real LEDs on  keyboard. All other indicators are &quot;virtual&quot; and can be showed by spaecial  programs. </p>
<p> In <strong>xkb_keycodes</strong> type file the a symbolic names are assigned to  each used indicator (specified by number). </p>
<p> And <strong>xkb_compat</strong> type file describes how these indicators behave in  dependence on keyboard state.    Remind that ... <br/>
  First of all, indicators can reflect state of </p>
<ul>
  <li> modifiers, </li>
  <li> group number, </li>
  <li> XKB control flags. </li>
</ul>
And since first two &quot;state components&quot; are distributed to three variables  (<strong>base, locked, latched</strong>) particular indicator can be bound to any  of these variable or to their &quot;effective&quot; (summary) value.
<p> I should note that one modifier can reflect simultaneously changes  of some modifier and a group number and a control flag.  (Don't ask me what it can be needed for :-). </p>
<p> And the second point is that the indicator also can be switched by  application. Thus describing indicator we can allow/deny such &quot;external&quot;  switching and describe &quot;feedback&quot; (it means that when program changes  indicator state the reflected &quot;state components&quot; also has to be changed). </p>
<p> The indicator behavior whole description looks like: </p>
<p>'indicator' inducator_name '{' description  '};'  </p>
<p> Here <strong>indicator_name</strong> is symbolic name (in double quotas) assigned  to the indicator in <strong>xkb_keycodes</strong> type file. </p>
<p> And <strong>description</strong> consists of instructions that looks like  assignment instruction. </p>
<p> They can be one of: </p>
<ul>
  <li><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/en/xkb/gram-compat.html#mods-group-ctrl">modifiers = ...; or mods  = ...;</a> </li>
  <li><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/en/xkb/gram-compat.html#mods-group-ctrl">groups = ...;</a> </li>
  <li><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/en/xkb/gram-compat.html#mods-group-ctrl">controls = ...; or  ctrls = ...;</a> </li>
  <li><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/en/xkb/gram-compat.html#which">whichModState = ...; or whichModifierState  = ...;</a> </li>
  <li><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/en/xkb/gram-compat.html#which">whichGroupState = ...;</a> </li>
  <li><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/en/xkb/gram-compat.html#explicit">allowExplicit = ...;</a> </li>
  <li><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/en/xkb/gram-compat.html#driveskbd">drivesKeyboard = ...;</a> (has lot of synonyms, see below) </li>
  <li><a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/en/xkb/gram-compat.html#index">index = ...;</a> </li>
</ul>
<h4><a name="mods-group-ctrl" id="mods-group-ctrl">modifiers, groups Й controls</a></h4>
<p> These ones define what &quot;state components&quot; the indicator has to reflect. <br/>
  Thus, value in right side must be </p>
<ul>
  <li> for <strong>modifiers</strong> - one modifier name or some modifiers names  concatenated by plus sign &quot;+&quot;; </li>
  <li> for <strong>groups</strong> - group number; </li>
  <li> for <strong>controls</strong> - control flag(s) name. </li>
</ul>
<p> Note that the group number can be specified ... </p>
<ul>
  <li> as simple numeric value; </li>
  <li> as names - <strong>group1, group2</strong>, etc.; </li>
  <li> as special word <strong>none</strong> (0) and <strong>all</strong> (0xFF); </li>
  <li> and finally, as simple math expression, for example <strong>All-1</strong> (&quot;all except the first one&quot;). </li>
</ul>
<h4><a name="which" id="which">whichModState and whichGroupState</a></h4>
<p> Since modifiers set and group number are distributed to three separate  variable (<strong>base, locked, latched</strong>) these instructions are needed  to specify which variable state must be reflected by indicator. </p>
<p> The word in the left part can be </p>
<ul>
  <li> <strong>base</strong> - reflect change of needed modifiers or group number in <strong>base</strong> variable (<strong>base Group</strong> or <strong>base Modifiers</strong> respectively); </li>
  <li> <strong>locked</strong> - the same for <strong>locked</strong> variables; </li>
  <li> <strong>latched</strong> - the same for <strong>latched</strong> variables; </li>
  <li> <strong>effective</strong> - reflect changes of 'effective' values (that means  sum of all three variables); </li>
  <li> <strong>any</strong> - reflect changes in any of all three variables; Note  that for modifiers set (<strong>whichModState</strong>) this condition is equal to <strong>effective</strong> becouse setting of some modifier in any of three variable  will cause its setting in 'effective' set. </li>
  <li> <strong>none</strong> - &quot;nowhere&quot;. Such instruction can make sense if you need  to cancel indicator binding to modifier or group made in some another file. </li>
</ul>
By default (if <strong>which...State</strong> isn't specified) <strong>effective</strong> value implied.
<h4><a name="explicit" id="explicit">allowExplicit</a></h4>
<p> It is logical flag that allow/disallow applications switch on/off indicator.  The point is that any application (for example, <strong>xset</strong> with <strong>led</strong> option) can send request to change state of indicator. And this flag is used  for set/unset the indicator protection against such changes. </p>
<p> Note that even if allowed such request changes indicator state only but  XKB state (group, modifier, control flag reflected by this indicator)  will stay unchanged. </p>
<p> Since this <strong>allowExplicit</strong> is boolean flag it can be specified  in form </p>
<p>allowExplicit = True;  or  allowExplicit = False;  </p>
or in short form
<p>allowExplicit; (is equivalent to 'allowExplicit = True;' )  </p>
or
<p>!allowExplicit; (is equivalent to 'allowExplicit = False;')  </p>
<p> By default its value is <strong>True</strong>. It means that all application is  allowed to change indicators. </p>
<h4><a name="driveskbd" id="driveskbd">drivesKeyboard</a></h4>
<p> It has many synonyms - <strong>drivesKbd, ledDrivesKbd, ledDrivesKkeyboard,  indicatorDrivesKbd, indicatorDrivesKeyboard</strong>. </p>
<p> It is also boolean flag that force the XKB to make 'feedback' between  indicator and keyboard state. It means that if this flag is set  (and <strong>allowExplicit</strong> too) and an application changes indicator  state the XKB has to change own state components related to this indicator. </p>
<p> Note that </p>
<ul>
  <li> it will change components specified by <strong>modifiers</strong>, <strong>group</strong> or <strong>controls</strong> instruction (usualy only one of such  components is bound to indicator); </li>
  <li> instructions <strong>whichModState</strong> or <strong>whichGroupState</strong> points -  in which of variables (<strong>base, locked, latched</strong>) the modifier or group  number must be changed. </li>
</ul>
<p> Herewith if &quot;<strong>which...state</strong>&quot; is <strong>none</strong>, <strong>base</strong> or <strong>any</strong> it will not have any effect. And <strong>effective</strong> in this case is equivalent  to <strong>locked</strong>. Remind that by default &quot;<strong>which...state</strong>&quot; value  is <strong>effective</strong> so if &quot;<strong>which...state</strong>&quot; isn't specified for the  indicator all changes will be made in <strong>locked Group</strong> or <strong>locked Modifiers</strong> variable respectively. </p>
<p> As for <strong>allowExplicit</strong> flag the <strong>drivesKeyboard</strong> declaration  looks like </p>
<p>drivesKeyboard = True; (or simply - drivesKeyboard;)  </p>
or
<p>drivesKeyboard = False; (or simply - !drivesKeyboard;)  </p>
<h4><a name="index" id="index">index</a></h4>
<p> This instruction allow to specify number of indicator (physical or  virtual one). Normally a relation between indicator name and its number  is set up in the <strong>xkb_keycodes</strong> type file. But you can specify it here. </p>
<h3><a name="defaults" id="defaults">Defaults declaration.</a></h3>
<p> This declaration is optional and allow specify some field (instruction)  for all next record such as <strong>interpret</strong> or <strong>indicator</strong>.    Usualy such declaration are placed at the begin of file or begin of  separate section. </p>
<p> The looks like assignment where left side looks like 'field of structure'  in C language. <br/>
  For example, </p>
<p>indicator.allowExplicit = False;  </p>
means that in all next <strong>indicator</strong> descriptions the <strong>allowExplicit</strong> flag imply <strong>False</strong> value (of course, if such instruction isn't specified  explicitly in the description).
<p> The first word in left side (before period sign) must be </p>
<ul>
  <li> <strong>interpret</strong> - if it is defaults for <strong>interpret</strong> description; </li>
  <li> <strong>indicator</strong> - if it is defaults for <strong>indicator</strong> description; </li>
  <li> or name of <strong>action</strong> that can occur in some of <strong>interpret</strong> description. In this case the instruction declare default values for  particular field in the <strong>action</strong> description. <br/>
    For example,
    <p>SetMod.clearLock = True;  </p>
    (more details about action description and posible fields see in <a href="https://web.archive.org/web/20190723235757/http://pascal.tsu.ru/en/xkb/gram-action.html">Actions description.</a>) </li>
</ul></td>
<td width="200" class="links" valign="top" align="left" style="padding-top:150px;">
 
</td>
</tr>
</table>
<div id="copyright">&copy; <a href="https://web.archive.org/web/20190723235757/mailto:pascal@tsu.ru">Иван Паскаль</a></div>
</body>
</html>
<!--
     FILE ARCHIVED ON 23:57:57 Jul 23, 2019 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 23:00:22 Aug 11, 2022.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
<!--
playback timings (ms):
  captures_list: 565.447
  exclusion.robots: 0.317
  exclusion.robots.policy: 0.306
  RedisCDXSource: 10.512
  esindex: 0.017
  LoadShardBlock: 536.199 (3)
  PetaboxLoader3.resolve: 178.569 (3)
  PetaboxLoader3.datanode: 425.94 (4)
  CDXLines.iter: 14.533 (3)
  load_resource: 76.27
-->